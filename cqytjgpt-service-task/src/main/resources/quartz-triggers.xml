<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
       http://www.springframework.org/schema/beans/spring-beans.xsd">
      
    <!-- Quartz 公共配置 开始 -->
    <!-- 自定义Facotory 定时任务纳入 spring 容器管理 -->
    <bean name="customJobFactory" class="com.ccttic.task.config.CustomJobFactory"/>
    
    <!-- Quartz Factory 配置-->
    <bean name="quartzScheduler" class="org.springframework.scheduling.quartz.SchedulerFactoryBean">  
        <property name="dataSource">
        	<ref bean="dataSource"/>
        </property>
        <property name="jobFactory">
        	<ref bean="customJobFactory"/>
        </property>
        <property name="configLocation" value="classpath:quartz.yml" />       
        <property name="triggers">  
            <list>
            	<ref bean="carIllegalTrigger"/>
            	<ref bean="carDangerTrigger"/>
            	<ref bean="driverIllegalTrigger"/>
            	<ref bean="driverDangerTrigger"/>
            </list>
        </property>  
    </bean>  
    <!-- Quartz 功能配置结束 -->
    
    <!-- Quartz 定时任务配置开始 -->
    <!-- 定时驾驶人违法开始 -->
    <!-- JOB上下文 -->
    <bean id="driverIllegalJob" class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
        <property name="jobClass" value="com.ccttic.task.execute.DriverIllegalTask"/>
        <property name="durability" value="true" />    
        <property name="requestsRecovery" value="true" />
    </bean>
     <!-- 定时触发器 -->
    <bean id="driverIllegalTrigger" class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail" ref="driverIllegalJob" />    
        <property name="cronExpression">
          <!-- 每周4零点启动 -->
           <value>0 0 0 ? * Thur</value>
        </property>  
    </bean>
    <!-- 定时驾驶人违法 结束  -->
    <!-- Quartz 定时任务配置借宿 -->
    
     <!-- Quartz 定时任务配置开始 -->
    <!-- 定时驾驶人预警 开始 -->
    <!-- JOB上下文 -->
    <bean id="driverDangerJob" class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
        <property name="jobClass" value="com.ccttic.task.execute.DriverDangerTask"/>
        <property name="durability" value="true" />    
        <property name="requestsRecovery" value="true" />
    </bean>
     <!-- 定时触发器 -->
    <bean id="driverDangerTrigger" class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail" ref="driverDangerJob" />    
        <property name="cronExpression">
          <!-- 每周4零点启动 -->
           <value>0 0 0 ? * Thur</value>
        </property>  
    </bean>
      <!-- 定时驾驶人预警  结束  -->
    <!-- Quartz 定时任务配置借宿 -->
    
     <!-- Quartz 定时任务配置开始 -->
    <!-- 定时车辆违法 开始 -->
    <!-- JOB上下文 -->
    <bean id="carIllegalJob" class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
        <property name="jobClass" value="com.ccttic.task.execute.CarIllegalTask"/>
        <property name="durability" value="true" />    
        <property name="requestsRecovery" value="true" />
    </bean>   
     <!-- 定时触发器 -->
    <bean id="carIllegalTrigger" class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail" ref="carIllegalJob" />    
        <property name="cronExpression">
          <!-- 每周4零点启动 -->
           <value>0 0 0 ? * Thur</value>
        </property>  
    </bean>
      <!-- 定时车辆 违法   结束  -->
    <!-- Quartz 定时任务配置借宿 -->
    
     <!-- Quartz 定时任务配置开始 -->
    <!-- 定时车辆预警 开始 -->
    <!-- JOB上下文 -->
    <bean id="carDangerJob" class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
        <property name="jobClass" value="com.ccttic.task.execute.CarDangerTask"/>
        <property name="durability" value="true" />    
        <property name="requestsRecovery" value="true" />
    </bean>
     <!-- 定时触发器 -->
    <bean id="carDangerTrigger" class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail" ref="carDangerJob" />    
        <property name="cronExpression">
           <!-- 每周4零点启动 -->
           <value>0 0 0 ? * Thur</value>
        </property>  
    </bean>
    <!-- 定时车辆预警  结束  -->
    <!-- Quartz 定时任务配置借宿 -->
</beans>