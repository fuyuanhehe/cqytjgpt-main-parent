<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ccttic.auth.mapper.RoleMenuMapper">
	<!-- 自定义返回结果集 -->
	<resultMap id="roleMenuMap" type="com.ccttic.auth.model.RoleMenu">
		<id property="id" column="id" javaType="java.lang.String"></id>
		<result property="roleId" column="role_id" javaType="java.lang.String"></result>
		<result property="menuId" column="menu_id" javaType="java.lang.String"></result>
		<result property="version" column="version" javaType="java.lang.Integer"></result>
	</resultMap>

	<!-- 通过角色ID删除角色菜单关系表-->
	<delete id="deleteRoleMenuByRoleId" parameterType="java.lang.String">
		delete from ess_role_menu where role_id=#{roleId}
	</delete>
	<!-- 批量增加角色菜单关系 -->
	<insert id="setRoleResource" parameterType="java.util.List">
	   insert into ess_role_menu (id,role_id,menu_id,version) values 
	    <foreach collection="rms" item="rm" separator=",">
	     (#{rm.id},#{rm.roleId},#{rm.menuId},#{rm.version})
	    </foreach>
	</insert>
	<!-- 获取角色已有权限菜单-->
	<select id="findRoleResources" parameterType="java.lang.String" resultMap="roleMenuMap">
		select * from ess_role_menu where role_id = #{roleId}  
	</select>
</mapper>	