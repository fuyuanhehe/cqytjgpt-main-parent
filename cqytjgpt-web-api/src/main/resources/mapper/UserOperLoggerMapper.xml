<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ccttic.mapper.UserOperLoggerMapper">
    <!-- 所有的字段 -->
    <sql id="fieldAll">id, content, operType, operBy, operTime, ipAddr, remark</sql>

    <sql id="setFieldAll">#{id}, #{content}, #{operType}, #{operBy}, #{operTime}, #{ipAddr}, #{remark}</sql>

    <!-- 保存操作日志 -->
    <insert id="addUserOperLogger" parameterType="com.ccttic.entity.UserOperLogger">
        INSERT INTO user_oper_log(<include refid="fieldAll"/>)
        VALUES (<include refid="setFieldAll"/>)
    </insert>

    <!-- 更新操作 -->
    <update id="renewUserOperLogger" parameterType="com.ccttic.entity.UserOperLogger">
        UPDATE user_oper_log
        <set>
            <if test="content != null and content != ''">content = #{content},</if>
            <if test="operBy != null and operBy != ''">operBy = #{operBy},</if>
            <if test="operTime != null and operTime != ''">operTime = #{operTime},</if>
            <if test="ipAddr != null and ipAddr != ''">ipAddr = #{ipAddr},</if>
            <if test="remark != null and remark != ''">remark = #{remark},</if>
        </set>
        WHERE id = #{id}
    </update>

    <delete id="delUserOperLogger" parameterType="java.lang.String">
        DELETE FROM user_oper_log WHERE id = #{id}
    </delete>
</mapper>